package com.oli.game;

import com.badlogic.gdx.graphics.OrthographicCamera;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.graphics.glutils.ShapeRenderer;
import com.oli.main.GameScreen;
import com.oli.main.Main;

public class MGame extends GameScreen {
	
	SpriteBatch batch;
	Texture background;
	OrthographicCamera camera;
	ShapeRenderer DebugRenderer;
	TrackGenerator _TrackGenerator;

	public MGame(Main game) {
		super(game);
	}
	
	@Override
	public void show() {
		
		batch = new SpriteBatch();
		camera = new OrthographicCamera(1280, 700);
		background = new Texture("background.png");
		DebugRenderer = new ShapeRenderer();
		_TrackGenerator = new TrackGenerator();
		
		camera.position.x = 640;
		camera.position.y = 350;
		DebugRenderer.setAutoShapeType(true);
		
	}
	
	@Override
	public void render(float delta) {
		
		batch.setProjectionMatrix(camera.combined);
		DebugRenderer.setProjectionMatrix(camera.combined);
		camera.update();
		
		batch.begin();
		
		batch.draw(background, 0, 0);
		
		batch.end();
		
		DebugRenderer.begin();
		
		for (int[] i : _TrackGenerator.GenerateSingleDebug()) {
			
			DebugRenderer.line(i[0], i[1], i[0] + 1, i[1] + 1);
			
		}
		
		DebugRenderer.end();
		
	}

}
